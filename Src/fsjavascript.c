#include "fsjavascript.h"
#include "fs.h"




const unsigned char data_header[] = {
/* HTTP header */
/* "HTTP/1.0 200 OK
" (17 bytes) */
0x48 ,0x54 ,0x54 ,0x50 ,0x2f ,0x31 ,0x2e ,0x30 ,0x20 ,0x32 ,0x30 ,0x30 ,0x20 ,
0x4f ,0x4b , 0x0d, 0x0a,

/* "Server: lwIP/1.3.1 (http://savannah.nongnu.org/projects/lwip)
" (63 bytes) */
0x53,0x65,0x72,0x76,0x65,0x72,0x3a,0x20,0x6c,0x77,0x49,0x50,0x2f,0x31,0x2e,0x33,
0x2e,0x31,0x20,0x28,0x68,0x74,0x74,0x70,0x3a,0x2f,0x2f,0x73,0x61,0x76,0x61,0x6e,
0x6e,0x61,0x68,0x2e,0x6e,0x6f,0x6e,0x67,0x6e,0x75,0x2e,0x6f,0x72,0x67,0x2f,0x70,
0x72,0x6f,0x6a,0x65,0x63,0x74,0x73,0x2f,0x6c,0x77,0x69,0x70,0x29,0x0d,0x0a,

/* "Content-type: application/json
" (32 bytes) 

0x43 ,0x6f ,0x6e ,0x74 ,0x65 ,0x6e ,0x74 ,0x2d ,0x74 ,0x79 ,0x70 ,0x65 ,0x3a ,0x20 ,
0x74 ,0x65 ,0x78 ,0x74 ,0x2f ,0x68 ,0x74 ,0x6d ,0x6c ,0x0d, 0x0a,0x0d, 0x0a,*/
0x43,0x6f ,0x6e ,0x74 ,0x65 ,0x6e ,0x74 ,0x2d ,0x74 ,0x79 ,0x70 ,0x65 ,0x3a ,0x20 ,
0x61 ,0x70 ,0x70 ,0x6c ,0x69 ,0x63 ,0x61 ,0x74 ,0x69 ,0x6f ,0x6e ,0x2f ,0x6a ,
0x73 ,0x6f ,0x6e,0x0d,0x0a,0x0d, 0x0a,

/* raw file data (1107 bytes) */

};



struct fs_file *fs_open_ajax(const char *name)
{
    struct fs_file *file;

    file = fs_malloc();
    
    if(file == NULL)
    {
        return NULL;
    }

    if(!strcmp(name, "/system")){
        
        printf("Found json file\n");
        file->data = data_header;
        file->len = sizeof(data_header);
        printf("/system len:%d\n", file->len);
        
        return file;
    }
    else
    {
        fs_free(file);
    }
    return NULL;
}





